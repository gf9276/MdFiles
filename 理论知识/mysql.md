# mysql

## b树和b+树

[写的不错的解析](https://blog.csdn.net/a519640026/article/details/106940115)

B-树,这里的 B 表示 balance( 平衡的意思),B-树是一种多路自平衡的搜索树（B树是一颗多路平衡查找树）
它类似普通的平衡二叉树，不同的一点是B-树允许每个节点有更多的子节点。

b树就是把数据分成一个个区块，然后和平衡树不同的是，他存的是一个区块，而不是一个数据点，这么干主要是为了利于从磁盘中读取。

空间局部性原理：如果一个存储器的某个位置被访问，那么将它附近的位置也会被访问。

**有个问题哈，我为什么不直接在双向链表上做查找和插入呢？效率也是O(logn)**


b+树，相较于b树，非叶子节点只存储key，叶子节点会连着存储data，好处是数据在磁盘上更加连续了，更适合mysql了

* B+ 树的非叶子节点不存放实际的记录数据，仅存放索引，因此数据量相同的情况下，相比存储即存索引又存记录的 B 树，B+树的非叶子节点可以存放更多的索引，因此 B+ 树可以比 B 树更「矮胖」，查询底层节点的磁盘 I/O次数会更少。
* B+ 树有大量的冗余节点（所有非叶子节点都是冗余索引），这些冗余索引让 B+ 树在插入、删除的效率都更高，比如删除根节点的时候，不会像 B 树那样会发生复杂的树的变化；
* B+ 树叶子节点之间用链表连接了起来，有利于范围查询，而 B 树要实现范围查询，因此只能通过树的遍历来完成范围查询，这会涉及多个节点的磁盘 I/O 操作，范围查询效率不如 B+ 树。

B+树的每个节点都是一个16KB的数据页